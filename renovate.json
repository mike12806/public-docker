{
  "extends": [
    "config:recommended"
  ],
  "enabledManagers": [
    "docker-compose",
    "dockerfile",
    "helm-values",
    "kubernetes",
    "argocd",
    "github-actions",
    "regex"
  ],
  "automerge": true,
  "automergeType": "branch",
  "automergeStrategy": "auto",
  "platformAutomerge": true,
  "regexManagers": [
    {
      "fileMatch": ["^Dockerfiles/.+/Dockerfile$"],
      "matchStrings": [
        "ARG YQ_VERSION=(?<currentValue>.*?)\\s",
        "ARG AWS_CLI_VERSION=(?<currentValue>.*?)\\s",
        "ARG B2_CLI_VERSION=(?<currentValue>.*?)\\s"
      ],
      "datasourceTemplate": "github-releases",
      "extractVersionTemplate": "^v?(?<version>.*)$",
      "depNameTemplate": {
        "YQ_VERSION": "mikefarah/yq",
        "AWS_CLI_VERSION": "aws/aws-cli",
        "B2_CLI_VERSION": "Backblaze/B2_Command_Line_Tool"
      }
    },
    {
      "fileMatch": ["^Dockerfiles/.+/Dockerfile$"],
      "matchStrings": [
        "ARG ANSIBLE_VERSION=(?<currentValue>.*?)\\s",
        "ARG LINODE_CLI_VERSION=(?<currentValue>.*?)\\s"
      ],
      "datasourceTemplate": "pypi",
      "depNameTemplate": {
        "ANSIBLE_VERSION": "ansible",
        "LINODE_CLI_VERSION": "linode-cli"
      }
    },
    {
      "fileMatch": ["^Dockerfiles/.+/Dockerfile$"],
      "matchStrings": [
        "ARG (?<package>[A-Z0-9_]+)_VERSION=(?<currentValue>.*?)\\s"
      ],
      "datasourceTemplate": "ubuntu",
      "depNameTemplate": {
        "PYTHON3_PIP_VERSION": "python3-pip",
        "PYTHON3_VENV_VERSION": "python3-venv",
        "PIPX_VERSION": "pipx",
        "SSHPASS_VERSION": "sshpass",
        "JQ_VERSION": "jq",
        "RSYNC_VERSION": "rsync",
        "OPENSSH_CLIENT_VERSION": "openssh-client",
        "CURL_VERSION": "curl",
        "UNZIP_VERSION": "unzip",
        "WGET_VERSION": "wget"
      },
      "versioningTemplate": "loose"
    }
  ],
  "packageRules": [
    {
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["major"],
      "automerge": false
    },
    {
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true
    },
    {
      "matchUpdateTypes": ["major"],
      "automerge": false
    },
    {
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true
    }
  ]
}
